!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.i=function(value){return value},__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0)}([function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Expense=function(){function Expense(id,desc,value){_classCallCheck(this,Expense),this.id=id,this.desc=desc,this.value=value,this.percentage=-1}return _createClass(Expense,[{key:"calPercentage",value:function(totalIncome){this.percentage=totalIncome>0?Math.round(this.value/totalIncome*100):-1}},{key:"getPercentage",value:function(){return this.percentage}}]),Expense}(),Income=function Income(id,desc,value){_classCallCheck(this,Income),this.id=id,this.desc=desc,this.value=value},BudgetController=function BudgetController(){_classCallCheck(this,BudgetController);var data={allitems:{inc:[],exp:[]},totals:{exp:0,inc:0},budget:0,percentage:-1},calculateTotal=function(type){var sum=0;data.allitems[type].forEach(function(cur){return sum+=cur.value}),data.totals[type]=sum};this.additem=function(type,desc,value){var newItem=void 0,ID=void 0;return ID=data.allitems[type].length>0?data.allitems[type][data.allitems[type].length-1].id+1:0,newItem="exp"===type?new Expense(ID,desc,value):new Income(ID,desc,value),data.allitems[type].push(newItem),newItem},this.getData=function(){return data.allitems.exp},this.deleteItem=function(type,id){for(var i=0;i<data.allitems[type].length;i++)if(data.allitems[type][i].id===id){data.allitems[type].splice(i,1);break}},this.calculatePercentage=function(){data.allitems.exp.forEach(function(cur){return cur.calPercentage(data.totals.inc)})},this.calculateBudget=function(){calculateTotal("exp"),calculateTotal("inc"),data.budget=data.totals.inc-data.totals.exp,data.budget>0?data.percentage=Math.round(data.totals.exp/data.totals.inc*100):data.percentage=-1},this.getPercentage=function(){return data.allitems.exp.map(function(cur){return cur.getPercentage()})},this.getBudget=function(){return{budget:data.budget,percentage:data.percentage,income:data.totals.inc,expense:data.totals.exp}}},UIController=function(){function UIController(){_classCallCheck(this,UIController);var DOMStrings={type:"type__select",desc:"description",value:"value",click:"add__value",incomeList:"income__list",expenseList:"expenses__list",headBudget:"budget__value",headIncome:"budget__income--value",headExpense:"budget__expenses--value",headPercentage:"budget__expenses--percentage",container:"container",percentage:".item__percentage",date:"budget__title--month"};this.getInput=function(){return{type:document.getElementById(DOMStrings.type).value,desc:document.getElementById(DOMStrings.desc).value,value:parseFloat(document.getElementById(DOMStrings.value).value)}},this.addItemToUI=function(obj,type){var html,newhtml,root;"exp"===type?(root=DOMStrings.expenseList,html=' <div class="item clearfix" id="exp-%id%"><div class="item__description">%desc%</div><div class="right clearfix"><div class="item__value">%value%</div><div class="item__percentage">21%</div><div class="item__delete"><button class="item__delete--btn"><i class="ion-ios-close-outline"></i></button></div></div></div>'):(root=DOMStrings.incomeList,html='<div class="item clearfix" id="inc-%id%"><div class="item__description">%desc%</div><div class="right clearfix"><div class="item__value">%value%</div><div class="item__delete"><button class="item__delete--btn"><i class="ion-ios-close-outline"></i></button></div></div></div>'),newhtml=html.replace("%id%",obj.id),newhtml=newhtml.replace("%desc%",obj.desc),newhtml=newhtml.replace("%value%",obj.value),document.querySelector("."+root).insertAdjacentHTML("beforeend",newhtml),document.getElementById(DOMStrings.desc).value="",document.getElementById(DOMStrings.value).value=""},this.displaybudget=function(obj){obj.budget>0?(document.getElementById(DOMStrings.headBudget).innerHTML="+ "+obj.budget,document.getElementById(DOMStrings.headPercentage).innerHTML=obj.percentage+"%"):(document.getElementById(DOMStrings.headBudget).innerHTML=obj.budget,document.getElementById(DOMStrings.headPercentage).innerHTML="---"),document.getElementById(DOMStrings.headExpense).innerHTML=obj.expense,document.getElementById(DOMStrings.headIncome).innerHTML=obj.income},this.updatepercentage=function(percentage){var fields=document.querySelectorAll(DOMStrings.percentage);!function(list,callback){for(var i=0;i<list.length;i++)callback(list[i],i)}(fields,function(current,index){percentage[index]>0?current.textContent=percentage[index]+"%":current.textContent="---"})},this.deleteIemfromUI=function(selectorID){document.getElementById(selectorID).parentNode.removeChild(document.getElementById(selectorID))},this.getDOMStrings=function(){return DOMStrings}}return _createClass(UIController,null,[{key:"displayDate",value:function(){var date=new Date,month=date.getMonth(),year=date.getFullYear(),months=["January","February","March","April","May","June","July","August","September","October","November","December"];document.getElementById("budget__title--month").innerHTML=months[month]+" "+year}}]),UIController}(),Controller=function Controller(budgetCtrl,UICtrl){_classCallCheck(this,Controller),this.budgetCtrl=budgetCtrl,this.UICtrl=UICtrl;var ctrlAddition=(function(){var DOMStrings=UICtrl.getDOMStrings();document.getElementById(DOMStrings.click).addEventListener("click",function(){return ctrlAddition()}),document.addEventListener("keypress",function(event){13!==event.keyCode&&13!==event.which||ctrlAddition()}),document.getElementById(DOMStrings.container).addEventListener("click",function(){return ctrlDeletion(event)})}(),function(){var input=void 0,newItem=void 0;input=UICtrl.getInput(),""===input.desc||isNaN(input.value)||""===input.value||(newItem=budgetCtrl.additem(input.type,input.desc,input.value),UICtrl.addItemToUI(newItem,input.type),updateBudget(),updatePercentage())}),updateBudget=function(){budgetCtrl.calculateBudget();var newBudget=budgetCtrl.getBudget();UICtrl.displaybudget(newBudget)},updatePercentage=function(){budgetCtrl.calculatePercentage();var per=budgetCtrl.getPercentage();UICtrl.updatepercentage(per)},ctrlDeletion=function(event){var itemID=void 0,type=void 0,id=void 0,newBudget=void 0;itemID=event.target.parentNode.parentNode.parentNode.parentNode.id,type=itemID.split("-")[0],id=parseFloat(itemID.split("-")[1]),budgetCtrl.deleteItem(type,id),budgetCtrl.calculateBudget(),newBudget=budgetCtrl.getBudget(),UICtrl.displaybudget(newBudget),UICtrl.deleteIemfromUI(itemID),updatePercentage()}};!function(){new Controller(new BudgetController,new UIController),UIController.displayDate()}()}]);